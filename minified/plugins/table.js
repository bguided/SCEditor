(function($){"use strict";$.sceditor.plugins.table=function(){var insertHeader,deleteHeader,insertRow,deleteRow,insertColumn,deleteColumn,deleteTable,base=this;base.signalContextmenuEvent=function(e,editor){var $currentNode=$(editor.currentNode()),$table=$currentNode.parents("table:first");if($table.length)return insertRow($(this.currentNode()),!0),e.stopImmediatePropagation(),e.preventDefault(),!1},insertHeader=function($currentNode){var $newTr=$("<tr></tr>"),$tr=$currentNode.parents("tr:first"),columnCount=$tr.children("td").length;if(columnCount){for(;columnCount--;)$newTr.append($("<th></th>"));$tr.before($newTr)}},deleteHeader=function($currentNode){var $table=$currentNode.parents("table:first"),$firstTr=$table.children("tr:first");$table.length&&!$firstTr.children("th").length&&$firstTr.remove()},insertRow=function($currentNode,before){var $newTr=$("<tr></tr>"),$tr=$currentNode.parents("tr:first"),columnCount=$tr.children("td").length;if(columnCount){for(;columnCount--;)$newTr.append($("<td></td>"));before?$tr.before($newTr):$tr.after($newTr)}},deleteRow=function($currentNode){$currentNode.parents("tr:first").remove()},insertColumn=function($currentNode,before){var $newTd,$curTd,$td=$currentNode.parents("tr:first"),$table=$td.parents("table:first"),index=$td.prevAll("td").length;$table.length&&$table.children("tr").each(function(i,$tr){$curTd=$tr.children("td").eq(index),$newTd=$("<td></td>"),before?$curTd.before($newTd):$curTd.after($newTd)})},deleteColumn=function($currentNode){var $td=$currentNode.parents("tr:first"),$table=$td.parents("table:first"),index=$td.prevAll("td").length;$table.length&&$table.children("tr").each(function(i,$tr){$tr.children("td").eq(index).remove()})},deleteTable=function($currentNode){$currentNode.parents("table:first").remove()}}})(jQuery);